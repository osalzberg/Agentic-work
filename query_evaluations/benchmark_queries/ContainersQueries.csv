Prompt,Query
Check for failed pods from the last month,"KubePodInventory | where TimeGenerated > ago(30d) | where PodStatus == ""Failed"" | project Name, PodUid, ServiceName, Namespace, ContainerStatusReason"
Identify pods that have restarted recently,"KubePodInventory | where TimeGenerated > ago(1h) | summarize arg_max(TimeGenerated, *) by PodUid | where PodRestartCount > 0 | project TimeGenerated, Name, PodUid, Namespace, PodStartTime, PodRestartCount, PodStatus, ContainerStatus"
Logs of terminated containers from the last 24 hours,"KubePodInventory | where TimeGenerated > ago(24h) | where ContainerStatus == ""terminated"" | join kind=inner (ContainerLogV2 | where TimeGenerated > ago(24h)) on $left.Name == $right.PodName, $left.ContainerID == $right.ContainerId"
Noisy Containers (Container with the highest log volume),"ContainerLogV2 | summarize logs_count=count() by ContainerName, PodNamespace | top 10 by logs_count desc"
what are all the events in namespaces "default" and "kube-system", from new to old,"KubeEvents | where Namespace in (""default"", ""kube-system"") | sort by TimeGenerated desc"
In which namespace are containers restarts most frequent?,"KubePodInventory | summarize TotalContainerRestarts = sum(ContainerRestartCount) by Namespace | sort by TotalContainerRestarts"
Find containers exceeding memory usage of 500000000,"KubePodMetrics | where MemoryRssBytes > 500000000 | project ContainerID, PodName, Namespace, MemoryRssBytes"
Aggregate CPU usage by pod and container,"KubePodMetrics | summarize TotalCPUUsageMillicores = sum(CPUUsageMillicores) by PodName, ContainerName | sort by TotalCPUUsageMillicores desc"
Show logs of container "store-front" from the last half hour, order from old to new,"ContainerLogV2 | where TimeGenerated >= ago(30m) | where ContainerName == ""store-front"" | order by TimeGenerated asc"
Display the log records for container store-front today, show the earliest first,"ContainerLogV2 | where TimeGenerated >= startofday(now()) | where ContainerName == ""store-front"" | order by TimeGenerated asc"
What logs were sent today from container 'store-front',"ContainerLogV2 | where TimeGenerated >= startofday(now()) | where ContainerName == ""store-front"""
Find container restart logs, show the time, container name and log message, from last to first,"ContainerLogV2 | where LogMessage has ""restart"" | project TimeGenerated, ContainerName, LogMessage | order by TimeGenerated desc"
For pods in namespaces containing "azure", find all container logs with text "Gecko" starting January 2, 2026,"ContainerLogV2 | where TimeGenerated >= todatetime(""2026-01-02"") | where PodNamespace has ""azure"" | where LogMessage has ""Gecko"""
For containers in podnamespace "azure-store" and container name "store-front", show all logs from Jan 1, 2026 until now and extract the json fields in LogMessage,"ContainerLogV2 | where TimeGenerated >= todatetime('2026-01-01') | where PodNamespace == ""azure-store"" and ContainerName == ""store-front"" | extend parsed_LogMessage = parse_json(LogMessage) | evaluate bag_unpack(parsed_LogMessage, 'LogMessage_')"
Show logs of terminated containers with namespace "tigera-operator","KubePodInventory | where Namespace == ""tigera-operator"" | where ContainerStatus == ""terminated"" | join kind=inner ( ContainerLogV2 | where PodNamespace has ""tigera-operator"") on $left.Name == $right.PodName, $left.ContainerID == $right.ContainerId"
Show logs of terminated containers with namespace tigera-operator, and project TimeGenerated, LogMessage, LogSource, ContainerName, ContainerId, PodName, PodIp and PodLabel,"KubePodInventory | where Namespace == ""tigera-operator"" | where ContainerStatus == ""terminated"" | join kind=inner ( ContainerLogV2 | where PodNamespace has ""tigera-operator"" ) on $left.Name == $right.PodName, $left.ContainerID == $right.ContainerId | project TimeGenerated, LogMessage, LogSource, ContainerName, ContainerId, PodName, PodIp, PodLabel"
Which containers keeps restarting in my pods?,"KubePodInventory | where ContainerStatus != 'terminated' | where PodRestartCount > 1 | extend ContainerLastStatus = todynamic(ContainerLastStatus) | summarize RestartCount = arg_max(ContainerRestartCount, Computer, Namespace, ContainerLastStatus.reason, ContainerStatusReason, ContainerStatus) by Name | sort by RestartCount"
Count the terminated containers in namespace kube-system,"KubePodInventory | where Namespace == ""kube-system"" | where ContainerStatus == 'terminated' | count"
Which of my pods are in pending phase and for how long?,"KubePodInventory | summarize arg_max(TimeGenerated, *) by PodUid | where PodStatus == ""Pending"" | project pending_time_hours = round((TimeGenerated - PodCreationTimeStamp)/1h, 2), PodUid, Name, ContainerID, Namespace, ClusterName, ServiceName"
What is the average CPU usage of each of my nodes in the past hour?,"Perf | where TimeGenerated > ago(1h) | where ObjectName == ""K8SNode"" | extend NodeId = InstanceName | where CounterName == ""cpuUsageNanoCores"" | summarize AverageCpuUsageNanoCores = avg(CounterValue) by NodeId | project NodeId, AverageCpuUsageNanoCores"
Show the median CPU nano cores per node over the last 12 hours,"Perf | where TimeGenerated > ago(12h) | where ObjectName == ""K8SNode"" | extend NodeId = InstanceName | where CounterName == ""cpuUsageNanoCores"" | summarize MedianCpuUsageNanoCores = percentile(CounterValue, 50) by NodeId | project NodeId, MedianCpuUsageNanoCores"
Chart the 95 percentile of CPU usage nano cores per node ID over last day,"Perf | where TimeGenerated > ago(1d) | where ObjectName == ""K8SNode"" | extend NodeId = InstanceName | where CounterName == ""cpuUsageNanoCores"" | summarize 95_percentileCpuUsageNanoCores = percentile(CounterValue, 95) by NodeId, bin(TimeGenerated, 15m) | render timechart"
What is the average memory usage of each nodes?,"KubeNodeInventory | distinct ClusterName, Computer, _ResourceId | join hint.strategy=shuffle (Perf | where ObjectName == 'K8SNode' | where CounterName == ""memoryCapacityBytes"" | summarize LimitValue = max(CounterValue) by Computer, CounterName | project Computer, LimitValue) on Computer | join kind=inner hint.strategy=shuffle (Perf | where ObjectName == 'K8SNode' | where CounterName == ""memoryRssBytes"" | project Computer, UsageValue = CounterValue, TimeGenerated) on Computer | project ClusterName, Computer, TimeGenerated, UsagePercent = UsageValue * 100.0 / LimitValue, NodeId = strcat(_ResourceId, ""/"", Computer) | summarize AverageUsagePercent = round(avg(UsagePercent), 2) by ClusterName, NodeId"
Chart node memory usage percentage every minute over the last 4 hours,"let binSize = 1m; KubeNodeInventory | where TimeGenerated > ago(4h) | distinct ClusterName, Computer, _ResourceId | join hint.strategy=shuffle (Perf | where TimeGenerated > ago(4h) | where ObjectName == 'K8SNode' | where CounterName == ""memoryCapacityBytes"" | summarize LimitValue = max(CounterValue) by Computer, CounterName, bin(TimeGenerated, binSize) | project Computer, TimeGenerated, LimitValue) on Computer | join kind=inner hint.strategy=shuffle (Perf | where TimeGenerated > ago(4h) | where ObjectName == 'K8SNode' | where CounterName == ""memoryRssBytes"" | summarize UsageValue = max(CounterValue) by Computer, CounterName, bin(TimeGenerated, binSize) | project Computer, TimeGenerated, UsageValue) on Computer | where TimeGenerated > ago(4h) | project TimeGenerated, Computer, ClusterName, UsageValue, UsagePercent = UsageValue * 100.0 / LimitValue, NodeId = strcat(_ResourceId, ""/"", Computer) | project TimeGenerated, UsagePercent, Computer | render timechart"
Show me the readiness of each node in my cluster,"KubeNodeInventory | distinct ClusterName, Computer, _ResourceId, TimeGenerated | summarize ClusterSnapshotCount = count() by bin(TimeGenerated, 1m), ClusterName, Computer, _ResourceId | join hint.strategy=broadcast kind=inner ( KubeNodeInventory | summarize TotalCount = count(), ReadyCount = sumif(1, Status contains (""Ready"")) by ClusterName, Computer, bin(TimeGenerated, 1m), _ResourceId | extend NotReadyCount = TotalCount - ReadyCount ) on ClusterName, Computer, _ResourceId, TimeGenerated | project TimeGenerated, ClusterName, Computer, ReadyCount = todouble(ReadyCount) / ClusterSnapshotCount, NotReadyCount = todouble(NotReadyCount) / ClusterSnapshotCount, _ResourceId | order by ClusterName asc, Computer asc, TimeGenerated desc, _ResourceId"
Find container logs for pods with namespace "calico-system", controller kind "ReplicaSet" and service name "calico-kube-controllers-metrics" from the last 2 hours,"KubePodInventory | where TimeGenerated > ago(2h) | where Namespace == ""calico-system"" | where ControllerKind == ""ReplicaSet"" | where ServiceName == ""calico-kube-controllers-metrics"" | join ( ContainerLogV2 | where TimeGenerated > ago(2h) | where PodNamespace == ""calico-system"" ) on $left.ContainerID == $right.ContainerId, $left.Name == $right.PodName"
List all container logs for any terminating pods with namespace "default" on October 1, 2025,"KubePodInventory | where TimeGenerated between (datetime(""2025-10-01T00:00:00Z"") .. datetime(""2025-10-01T23:59:59Z"")) | where Namespace == ""default"" | where PodStatus == ""Terminating"" | join kind=innerunique ( ContainerLogV2 | where TimeGenerated between (datetime(""2025-10-01T00:00:00Z"") .. datetime(""2025-10-01T23:59:59Z"")) | where PodNamespace == ""default"" ) on $left.ContainerID == $right.ContainerId, $left.Name == $right.PodName"
Show pod inventory details for all pods in clusters ending with "cluster2" between December 23, 2025 and December 26, 2025,"KubePodInventory | where TimeGenerated between (todatetime(""2025-12-23"") .. todatetime(""2025-12-26"")) | where ClusterName endswith ""cluster2"" | project TimeGenerated, PodUid, Name, Namespace, PodStatus, PodCreationTimeStamp, PodStartTime, PodIp, PodLabel, PodRestartCount"
latest pod details of all pods in service 'order-service',"KubePodInventory | where ServiceName == ""order-service"" | project TimeGenerated, PodUid, Name, Namespace, PodStatus, PodCreationTimeStamp, PodStartTime, PodIp, PodLabel, PodRestartCount | summarize arg_max(TimeGenerated, *) by PodUid"
Latest container details of all containers in clusters containing "test_aks","KubePodInventory | where ClusterName has ""test_aks"" | where isnotempty(ClusterId) and isnotempty(ContainerName) and isnotempty(Computer) | summarize arg_max(TimeGenerated, *) by ContainerID | project TimeGenerated, ContainerID, ContainerName, ContainerStatus, ContainerStatusReason, ContainerLastStatus, ContainerRestartCount"
Count the containers per node in cluster noakup_test_aks_cluster2 from the last 3 hours,"KubePodInventory | where TimeGenerated > ago(3h) | where ClusterName == ""noakup_test_aks_cluster2"" | where isnotempty(ClusterId) and isnotempty(Computer) | extend NodeId = strcat(ClusterId, ""/"", Computer) | distinct NodeId, ContainerName | summarize ContainerCount = count() by NodeId | sort by ContainerCount"
Which nodes have highest number of containers, in each cluster,"KubePodInventory | where isnotempty(ClusterId) and isnotempty(Computer) | extend NodeId = strcat(ClusterId, ""/"", Computer) | distinct NodeId, ContainerName, ClusterId | summarize ContainerCount = count() by ClusterId, NodeId | top 10 by ContainerCount"
How many pods run on each node in "my-cluster","KubePodInventory | where isnotempty(ClusterId) and isnotempty(Computer) | extend NodeId = strcat(ClusterId, ""/"", Computer) | summarize arg_max(TimeGenerated, *) by PodUid | distinct NodeId, PodUid | summarize count() by NodeId"
List pods not running,"KubePodInventory | summarize arg_max(TimeGenerated, *) by PodUid | where PodStatus != ""Running"" | project pending_time_hours = round((TimeGenerated - PodCreationTimeStamp)/1h, 2), PodUid, Name, ContainerID, Namespace, ClusterName, ServiceName"
